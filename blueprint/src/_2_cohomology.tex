\chapter{Group Cohomology}

\section{Introduction}

The aim of this chapter is to define the basic concepts of group cohomology and to
prove the following theorem of Tate:

\begin{theorem}
	Let $M$ be a representation of a finite group $G$ over the ring $\Z$, and suppose
	that for all subgroups $S$ of $G$ the following two conditions hold:
	\begin{itemize}
		\item
		$H^1(S,M) \cong 0$,
		\item
		$H^2(S,M) \cong \Z / |G| \cdot \Z$.
	\end{itemize}
	Then there is an isomorphism
	\[
		G^{\ab} \cong M^G / N_G M.
	\]
	If $\sigma$ is a 2-cocycle representing a generator of $H^2(G,M)$ then the isomorphism
	is given by
	\[
		\reciprocity(g) = \sum_{x \in G} \sigma(x,g)
	\]
\end{theorem}

In later chapters we shall see that the hypotheses of the theorem are satisfied in the following
cases.
\begin{itemize}
	\item
	If $l/k$ is a finite Galois extension of local fields and $G = \Gal(l/k)$ then we
	may regard the group $l^\times$ as a respresentation of $G$. This representation
	satisfies the hypotheses above so we we have an isomorphism:
	\[
		\reciprocity : \Gal(l/k)^{\ab} \cong k^\times / N(l^\times).
	\]
	\item
	If $l/k$ is a finite Galois extension of number fields and $G = \Gal(l/k)$ then we
	may regard the idele class group $\Cl_l = \A^\times / l^\times$ as a respresentation of $G$.
	This representation satisfies the hypotheses above so we we have an isomorphism:
	\[
		\reciprocity : \Gal(l/k)^{\ab} \cong \Cl_k / N(Cl_l).
	\]
\end{itemize}






\section{Group cohomology and homology}

Let $G$ be a group and $R$ a commutative ring.
By a \emph{representation of $G$ over $R$},
we shall mean an $R$-module $M$ with an action of $G$ by $R$-linear maps.
We shall use the notation $g \bullet m$ for the action of an element $g \in G$
on an element $m \in M$.
We'll call $M$ a \emph{trivial} representation if for all $g \in G$ and all $m \in M$ we
have $g \bullet m = m$.
We'll write $\Mod(R)$ for the category of $R$-modules and $\Rep(R,G)$
for the category of such representations.
In Mathlib these are called \texttt{ModuleCat R} and \texttt{Rep R G}.

If $S$ is a subgroup of $G$ and $M$ is a representation of $G$
then $M \downarrow S$ will mean the same $R$-module $M$,
but regarded only as a representation of $S$.
We shall write $M^S$ for the $R$-submodule of $S$-invariant vectors in $M$.
If the subgroup $S$ is normal then $M^S$ is a representation of the quotient group $G/S$.

\begin{definition} \label{def:inflation restriction functors}
	\lean{Rep.quotientToInvariantsFunctor,
		Rep.res}
	The map $M \mapsto M \downarrow S$ defines a functor $\Res : \Rep(R,G) \to \Rep(R,S)$.
	If $S$ is a normal subgroup of $G$ then then map $M \mapsto M^S$ defines
	a functor $\Invar : \Rep(R,G) \to \Rep(R, G/S)$.
	These functors are called \emph{restriction} and \emph{inflation} respectively.
\end{definition}


Given a representation $M$ of $G$, there is a cochain complex of $R$-modules
\[
	C^0(G,M) \stackrel{d^0}\to C^1(G,M)  \stackrel{d^1}\to C^2(G,M)  \stackrel{d^2}\to \cdots
\]
where each term $C^n(G,M)$ is the space of functions $G^n \to M$ with some appropriately defined
linear maps $d^i$ linking them.
The zeroth module $C^0(G,M)$ should be interpreted as just $M$.
The first few of these linear maps $d^i$ are
\begin{align*}
	(d^0 m)(x) &= x \bullet m - m
	& m \in M, \\
	(d^1 f)(x,y) &= x \bullet f(y) - f(xy) + f(x)
	& f : G \to M,\\
	(d^2 f)(x,y,z) &= x\bullet f(y,z) - f(xy,z) + f(x,yz) - f(x,y),
	& f : G^2 \to M.
\end{align*}
The cochain complex $C^\bullet(G,M)$ is functorial in $M$ and is defined in Mathlib as
\texttt{groupCohomology.cochainsFunctor}.
The cohomology groups of $C^\bullet(G,M)$ are called the cohomology groups of the
$G$-module $M$, and are written $H^n(G,M)$. These are defined in Mathlib as
\texttt{groupCohomology M n}, or \texttt{(groupCohomology.functor n).obj M}.

\begin{example} \label{eg:H0}
	For example $H^0(G,M)$ is just the kernel of the map $d^0 : M \to (G \to M)$.
	Since $(d^0m)(g) = g \bullet m - m$, an element $m$ is in this kernel if $m$ is in $M^G$,
	so we have $H^0(G,M) \cong M^G$.
\end{example}

\begin{example} \label{eg:H1 trivial iso Hom}
	Suppose $M$ is a trivial representation of $G$. Then the map $d^0$ is zero,
	so $H^1(G,M)$ is the kernel of the map $(d^1f)(x,y) = f(x) + f(y) - f(xy)$.
	A function $f: G \to M$ is in this kernel if it is a group homomorphism, so we have
	$H^1(G,M) \cong \Hom(G,M)$.
\end{example}

\begin{example} \label{eg:H2 unit}
	If $G$ is the trivial group then for all $n>0$, $H^n(G,M)\cong 0$.
	In this case each of the modules $C^n(G,M)$ may be identified with $M$,
	and the coboundary maps reduce to alternating sums of the form
	$d^n(m) = \sum_{i=0}^{n+1} (-1)^i m$.
	Hence $d^n$ is the identity map for odd $n$, and is the zero map for even $m$.
\end{example}

\begin{remark}
	The functions $d^i : (G^i \to M) \to (G^{i+1} \to M)$ do not depend on the
	ring $R$. Consequently, the additive groups $H^n(G,M)$ do not depend on
	the $R$. More precisely there are forgetful functors $F_1 : \Rep(R,G) \to \Rep(\Z,G)$
	and $F_2 : \Mod(R) \to \Mod(\Z)$, and there are isomorphisms of functors
	\[
		H^n \circ F_1 \cong F_2 \circ H^n.
	\]
	That said, it is very little extra work to prove the cohomological results
	discussed here in the generality of $\Rep(R,G)$ rather than $\Rep(\Z,G)$.
\end{remark}

\begin{remark}
	At this point it's worth stressing one particular aspect of this theory.
	Many of the proofs involve showing that certain diagrams commute. When writing proofs on paper,
	some mathematicians don't give too much thought to the reasons why a particular diagram commutes
	but when formalizing theorems we need to be more careful than this.
	For that reason it is important to define all of our objects in as functorial a way as possible.
	In the example from the previous remark,
	saying that there is an isomorphism $H^n(G,F_1(M)) \cong F_2(H^n(G,M))$
	is not as good as saying that there is an isomorphism of functors
	$H^n \circ F_1 \cong F_2 \circ H^n$.
	The isomorphism of functors implies that for every map $f : A \to B$ in $\Rep(R,G)$
	we have a commuting square in $\Mod(\Z)$.
	\[
		\begin{matrix}
			H^n(G,F_1(A)) & \stackrel{H^1(G,F_1(f))}\to & H^n(G,F_1(B))\\
			\downarrow &&\downarrow \\
			F_2(H^n(G,M)) & \stackrel{F_2(H^1(G,f))}\to & F_2 H^n(G,B)
		\end{matrix} .
	\]
	This commuting square might be crucial in some other proof.
	This is also the reason why we work with the categories \texttt{Rep R G} and \texttt{ModuleCat R},
	rather than with \texttt{Representation R G M} and \texttt{Module R M} which could be more
	familiar.
\end{remark}

\begin{definition} \label{def:restriction map}
	\lean{groupCohomology.rest}
	\uses{def:inflation restriction functors}
	If $S$ is a subgroup of $G$, then we write $H^n(S,M)$ for the
	cohomology groups of the restricted representation $M \downarrow S$.
	If $f : G^n \to M$ is an element of $C^n(G,M)$, then we may restrict $f$ to
	a function $S^n \to M$. Restricting functions in this way defines a map of
	cochain complexes $C^\bullet(G,M) \to C^\bullet(S,M)$, and hence a map of
	cohomology groups
	\[
		\rest : H^n(G,M) \to H^n(S,M).
	\]
	This map is called the \emph{restriction map}, and is a morphism of functors
	from $H^n(G,-)$ to $H^n(S, -) \circ \Res$.
\end{definition}

\begin{definition} \label{def:inflation map}
	\lean{groupCohomology.cochain_infl,
		groupCohomology.infl
	}
	\uses{def:inflation restriction functors}
	If $S$ is a normal subgroup of $G$, then we write $H^n(G/S,M^S)$ for the
	cohomology groups of the representation $M^S$ of $G/S$.
	If $f : (G/S)^n \to M^S$ is an element of $C^n(G/S,M^S)$, then we may ``inflate'' $f$ to
	a function $G^n \to M$. This inflation process defines a map of
	cochain complexes $C^\bullet(G/S,M^S) \to C^\bullet(G,M)$, and hence a map of
	cohomology groups, called the \emph{inflation map}:
	\[
		\infl : H^n(G/S,M^H) \to H^n(G,M).
	\]
	More precisely, the inflation map is a morphism of functors from
	$H^n (S, -)\circ \Invar$ to $H^n(G,-)$.
\end{definition}

The following results are in a current PR.

\begin{lemma} \label{lem:cochainsFunctor exact}
  The functor taking $M$ to $C^\bullet (G,M)$ is exact.
  I.e. if $0 \to A \to B \to C \to 0$ be a short exact sequence of $G$-modules.
  Then the corresponding sequence of cochain complexes is exact:
  \[
    0 \to C^n(G,A) \to C^n(G,B) \to C^n(G,C) \to 0.
  \]
\end{lemma}

As a consequence of this, we have the following (also a current PR):

\begin{definition} \label{def:cohomology long exact sequence}
  \lean{groupCohomology.δ,
		groupCohomology.longExactSequence₁,
		groupCohomology.longExactSequence₂,
		groupCohomology.longExactSequence₃}
  \uses{lem:cochainsFunctor exact}
  Given a short exact sequence $0 \to A \stackrel{f}\to B \stackrel{g}\to C \to 0$ in $\Rep(R,G)$,
  the corresponding sequence of cochain complexes is exact:
  $0 \to C^n(G,A) \to C^n(G,B) \to C^n(G,C) \to 0$.
  This implies that there exist ``connecting homomorphisms''
	$\delta : H^n(G,C) \to H^{n+1}(G,A)$,
  such that the following is a long exact sequence:
  \[
    0 \to H^0(G,A) \stackrel{H^0(f)}\to H^0(G,B) \stackrel{H^0(g)}\to H^0(G,C) \stackrel{\delta}\to
    H^1(G,A) \stackrel{H^1(f)}\to H^1(G,B) \stackrel{H^1(g)} \to H^1(G,C) \stackrel{\delta}\to \cdots.
  \]
\end{definition}

\begin{lemma} \label{lem:inflation restriction naturality}
	\lean{groupCohomology.rest,
		groupCohomology.infl,
		groupCohomology.rest_δ_naturality,
		groupCohomology.infl_δ_naturality}
	\uses{
		def:restriction map,
		def:inflation map,
		def:cohomology long exact sequence,
		def:inflation restriction functors}
	\leanok
	Let $S$ be a subgroup of $G$ and suppose we have a short exact sequence
	$0 \to A \to B \to C \to 0$ in $\Rep(R,G)$.
	Then the sequence the sequence
	$0 \to A \downarrow S \to B \downarrow S \to C \downarrow S \to 0$ is exact
	in $\Rep(R,S)$.
	The following diagram commutes, where the rows are the long exact sequences
	for $0 \to A \to B \to C \to 0$ and for its restriction to $S$,
	and the vertical maps are restriction.
	\[
  	\begin{array}{ccccccc}
			H^n(G,A) & \to & H^n(G,B) &\to &H^n(G,C)& \to& H^{n+1}(G,A)\\
			\downarrow&&\downarrow&&\downarrow&&\downarrow \\
			H^n(S,A) & \to & H^n(S,B) &\to &H^n(S,C)& \to& H^{n+1}(S,A)
		\end{array}
  \]
	Suppose now that $S$ is a normal subgroup of $G$. Then we have for every
	map $f : A \to B$ in $\Rep(R,G)$ a commuting square in which the vertical maps are inflation.
	\[
  	\begin{array}{ccccccc}
			H^n(G/S,A^S) & \stackrel{H^n(\Invar(f))}\to & H^n(G/S,B^S)\\
			\downarrow&&\downarrow \\
			H^n(G,A) & \stackrel{H^n(f)}\to & H^n(G,B)
		\end{array}.
	\]
	If $0 \to A \to B \to C \to 0$ is exact in $\Rep(R,G)$ and its inflation
	$0 \to A^S \to B^S \to C^S \to 0$ is also exact in $Rep(R,G/S)$, then
	we have a commutative diagram in which the rows are the corresponding long exact
	sequences and the vertical maps are inflation:
	\[
  	\begin{array}{ccccccc}
			H^n(G/S,A^S) & \to & H^n(G/S,B^S) &\to &H^n(G/S,C^S)& \stackrel{\delta}\to& H^{n+1}(G/S,A^S)\\
			\downarrow&&\downarrow&&\downarrow&&\downarrow \\
			H^n(G,A) & \to & H^n(G,B) &\to &H^n(G,C)& \stackrel{\delta}\to& H^{n+1}(G,A)
		\end{array}.
  \]
\end{lemma}

\begin{proof}
	Most of the commuting squares have already been proved if
	inflation and restriction are defined as morphisms of functors.
	The remaining two squares are:
	\[
  	\begin{matrix}
			H^n(G,C)& \stackrel{\delta}\to& H^{n+1}(G,A)\\
			\rest\downarrow&&\downarrow\rest \\
			H^n(S,C)& \stackrel{\delta} \to& H^{n+1}(S,A)
		\end{matrix}
		\qquad\textrm{ and }\qquad
		\begin{matrix}
			H^n(G/S,C^S)& \stackrel{\delta}\to& H^{n+1}(G/S,A^S)\\
			\infl\downarrow&&\downarrow\infl\\
			H^n(G,C)& \stackrel{\delta}\to& H^{n+1}(G,A)
		\end{matrix} .
  \]
	Both of these can be deduced from the following statement in Mathlib:
	\begin{quote}
		\texttt{HomologicalComplex.HomologySequence.$\delta$\_naturality}
	\end{quote}
\end{proof}

\begin{definition} \label{def:group homology}
	\lean{groupHomology.inhomogeneousChains,
		groupHomology,
		groupHomology.chainsMap,
		groupHomology.Map}
	There is also a chain complex of $R$-modules:
	\[
		\cdots \stackrel{d_2}\to C_2(G,M) \stackrel{d_1}\to C_1(G,M) \stackrel{d_0}\to C_0(G,M)
	\]
	whose $n$-th term is the space of finitely supported functions
	$f : G^n \to_0 M$, with appropriately defined boundary maps $d_n$.
	In the literature $C_n(G,M)$ is often defined as $R[G]^{\otimes n} \otimes_R M$, to which it is
	canonically isomorphic.
	In the case $n=0$ this is interpreted as meaning $C_0(G,M) = M$.
	The homology groups of $C_n(G,M)$ are called the \emph{homology groups of $M$}
	and are written $H_n(G,M)$.
\end{definition}

\begin{example}
	We'll sometimes write $\single(g,m)$ for the function with value $m$ at $g$ and value
	zero elsewhere. The $R$-module $C_1(G,M)$ is spanned by the elements $\single(g,m)$
	for $g \in G$ and $m \in M$ (\texttt{Finsupp.single} in Mathlib).
	For such elements we have
	\[
		d_0(\single(g,m))
		=
		g \bullet m - m.
	\]
	We shall write $I_G M$ for the submodule of $M$ spanned by elements of the form $g \bullet m - m$.
	The quotient $M / I_GM$ is commonly called the \emph{coinvariants} of $M$ and is written $M_G$;
	this is the largest	quotient module on which $G$ acts trivially.
	It follows that $H_0(G,M) \cong M_G$.
\end{example}



\section{Tate Cohomology}

Throughout this section, the group $G$ is assumed to be finite.
Under this assumption, we show that the homology and cohomology groups
may both be regarded as part of a bigger cohomology theory, which is called Tate cohomology.

\begin{definition} \label{def:norm}
	\lean{Representation.norm,
		groupCohomology.TateNorm}
	\uses{def:group homology}
	Let $G$ be a finite group and $M$ a representation of $G$ over a commutative ring $R$.
	There is a canonical linear map $N_G : M \to M$ called the \emph{norm},
	defined by
	\[
		N_G(m) = \sum_{g \in G} g \bullet m.
	\]
	We shall also regard the norm as a linear map from $C_0(G,M)$ to $C^0(G,M)$, both of which may
	be identified with $M$.

	(We'll see in the next two lemmas that $N_G$ commutes with the action of $G$,
	so is a morphism in $Rep(R,G)$. However, we shall only regard it as a morphism in $\Mod(R)$.
	The reason is that the chain and cochain modules $C^0(G,M)$ and
	$C_0(G,M)$ are regarded as $R$-modules rather than representations of $G$.)
\end{definition}

\begin{lemma}	\label{lem:norm comm}
	\lean{Representation.norm_comm,
		Representation.norm_comm'}
	\uses{def:norm}
	\leanok
	For any $g \in G$ and $m \in M$ we have $g \bullet N_G (m) = N_G (m)$
	and $N_G (g \bullet m) = N_G (m)$.
\end{lemma}

\begin{lemma}	\label{lem:norm comp d}
	\lean{groupCohomology.TateNorm_comp_d}
	\uses{def:norm, lem:norm comm}
	\leanok
	The composition $d^0 \circ N_G$ is zero.
\end{lemma}

\begin{proof}
	The map $d^0 : M \to (G \to M)$ is given by
	$(d^0 m)(g) = m - g\bullet m$.
	Using this formula, we obtain (by Lemma \ref{lem:norm comm})
	$d^0 (N_G m) (g) = N_G m - g \bullet N_G m = 0$.
\end{proof}

\begin{lemma}	\label{lem:d comp norm}
	\lean{groupCohomology.d_comp_TateNorm}
	\uses{def:norm, lem:norm comm, def:group homology}
	The composition $N_G \circ d_0$ is zero.
\end{lemma}

\begin{proof}
	Since the elements $\single(g,m)$ span $C_1(G,M)$, it's sufficient to check
	that these are all mapped to $0$.
	We have by \ref{lem:norm comm}
	\[
		N_G(d_0 (\single(g,m)))
		=
		N_G( g \bullet m - m)
		=
		N_G( g \bullet m) - N_G(m)
		= 0.
	\]
\end{proof}

\begin{lemma} \label{lem:norm naturality}
	For every map $f : A \to B$ in $\Rep(R,G)$ we have a commuting square:
	\[
		\begin{matrix}
			A & \stackrel{f}\to & B \\
			N_G\downarrow && \downarrow N_G \\
			A & \stackrel{f}\to & B
		\end{matrix} .
	\]
	Equivalently, $N_G$ is an endomorphism of the forgetful functor $\Rep(R,G) \to \Mod(R)$.
\end{lemma}

\begin{proof}
	For $m \in M$ we have
	\[
		f(N_G (m)) = f\left( \sum_{g \in G} g \bullet m\right)
		=\sum_{g \in G} g \bullet f(m)
		=N_G(f(m)).
	\]
\end{proof}

\begin{definition} \label{def:Tate cohomology}
	\lean{groupCohomology.TateComplex,
		groupCohomology.TateComplexFunctor,
		groupCohomology.TateCohomology}
	\uses{
		lem:norm comp d,
		lem:d comp norm}
	\leanok
	Recall that we have a cochain complex $C^n(G,M)$, indexed by $n \in \N$,
	whose zeroth term may be identified with $M$.
	We also have a chain complex $C_n(G,M)$ whose zeroth term may be identified with $M$.
	By \ref{lem:norm comp d} and \ref{lem:d comp norm}, we may glue these
	together with the map $N_G : M \to M$ to obtain	a cochain complex indexed by $\Z$:
	\[
		\cdots \to C_2(G,M) \to C_1(G,M) \stackrel{d_0}\to C_0(G,M)
		\stackrel{N_G}\to C^0(G,M) \stackrel{d^0}\to C^1(G,M) \to C^2(G,M) \to \cdots
	\]
	We shall write $C^n_{\Tate}(G,M)$ for this cochain complex,
	and we normalize the indices so that for
	natural numbers $n$ we have $C^n_{\Tate}(G,M) = C^n(G,M)$. This implies
	$C^{-n-1}_{\Tate}(G,M) = C_n(G,M)$.
	It follows from \ref{lem:norm naturality}
	that $C^\bullet_{\Tate}(G,M)$ is functorial in $M$.

	For an integer $n$, we shall write $H^n_{\Tate}(G,M)$ for the $n$-th cohomology of the complex
	$C^n_{\Tate}(G,M)$; this is called the $n$-th Tate cohomology of $M$,
	and is often written $\hat H^n(G,M)$ or (confusingly) just $H^n(G,M)$ in the literature.
	We stress that Tate cohomology exists only in the case that $G$ is a finite group.
\end{definition}

\begin{lemma}	\label{lem:Tate cohomology is cohomology or homology}
  \lean{groupCohomology.TateCohomology.iso_groupCohomology,
    groupCohomology.TateCohomology.iso_groupHomology,
		groupCohomology.TateCohomology_zero_iso,
		groupCohomology.TateCohomology_zero_iso_of_isTrivial,
		groupCohomology.TateCohomology_neg_one_iso,
		groupCohomology.TateCohomology_neg_one_iso_of_isTrivial}
	\uses{def:Tate cohomology}
	\leanok
	Let $G$ be a finite group and $M$ a representation of $G$.
	\begin{itemize}
		\item
		The zeroth Tate cohomology $H^0_{\Tate}(G,M)$ is isomorphic to $M^G / N_G(M)$.
		In particular if $M$ is a trivial representation of $G$ then
		$H^0_{\Tate}(G,M) \cong M / |G|M$.
		\item
		For $n >0 $ we have (an isomorphism of functors in the variable $M$)
		\[
			H^{n}_{\Tate}(G,M) \cong H^{n}(G,M).
		\]
		\item
		There is an isomorphism
		\[
			H^{-1}_{\Tate}(G,M) \cong \ker (N_G : M \to M ) / I_G M,
		\]
		Where $I_GM$ is the submodule of $M$ generated by elements of the form $g \bullet m - m$.
		In particular if $M$ is a trivial representation of $G$ then
		$H^{-1}_{\Tate}(G,M)$ is isomorphic to the $|G|$-torsion in $M$.
		\item
		For $n < -1$ we have (an isomorphism of functors in the variable $M$)
		\[
			H^{n}_{\Tate}(G,M) \cong H_{-1-n} (G,M).
		\]
	\end{itemize}
\end{lemma}

\begin{proof}
	This result is clear from the definition for $n > 0$ and $n < -1$. We'll discuss
	the two remaining cases.

	The $0$-cocycle submodule is the kernel of the map $d^0 : C^0(G,M) \to C^1(G,M)$.
	This is the same as $H^0(G,M)$, which is isomorphic to $M^G$.
	On the other hand $B^0_{\Tate}(G,M)$ is by definition the image of $N_G : M \to M$.

	Similarly, $H_0(G,M)$ is the quotient of $M$ by $I_GM$,
	and $H^{-1}_{\Tate}(G,M)$ is by definition the quotient of $\ker(N_G : M \to M)$
	by the same submodule.
\end{proof}

\begin{definition}	\label{def:Tate long exact sequence}
  \lean{groupCohomology.TateComplexFunctor_preservesFiniteLimits,
    groupCohomology.TateComplexFunctor_preservesFiniteColimits,
		groupCohomology.TateCohomology.δ}
	\uses{def:Tate cohomology,
		lem:cochainsFunctor exact}
	\leanok
  Since the functors $C^\bullet(G,-)$ and $C_\bullet(G,-)$ are both exact, it follows
	that $C^\bullet_{\Tate}(G,-)$ is an exact functor.
	Hence, given any short exact sequence in $\Rep(R,G)$:
	\[
		0 \to A \to B \to C \to 0,
	\]
	we obtain a short exact sequence of Tate complexes and therefore
	connecting homomorphisms $\delta : H^n_{\Tate}(G,C) \to H^{n+1}_{\Tate}(G,A)$
	such that the following is a long exact sequence (for $n \in \Z$):
	\[
		\cdots \to H^n_{\Tate}(G,A) \to H^n_{\Tate}(G,B) \to H^n_{\Tate}(G,C)
		\to H^{n+1}_{\Tate}(G,A) \to H^{n+1}_{\Tate}(G,B) \to \cdots
	\]
	The exactness statements are in Mathlib in the namespace
	\texttt{HomologicalComplex.HomologySequence}.
	The connecting maps $\delta : H^n_{\Tate}(G,C) \to H^n_{\Tate}(G,A)$
	coincide with those for cohomology for $n \ge 1$ and with those for homology of $n \le -3$.
\end{definition}





\section{Coinduced and induced representations}

\begin{definition} \label{def:trivial cohomology}
	\lean{Rep.TrivialCohomology,
		Rep.TrivialHomology,
		Rep.TrivialTateCohomology}
	\uses{def:group homology}
	\leanok
	Let $M$ be a representation of $G$ over a ring $R$.
	\begin{itemize}
		\item
		$M$ is said to have \emph{trivial cohomology} if for every subgroup $S \le G$
		and every $n > 0$, $H^n(S,M) \cong 0$.
		\item
		$M$ is said to have \emph{trivial homology} if for every subgroup $S \le G$
		and every $n > 0$, $H_n(S,M) \cong 0$.
		\item
		Suppose the group $G$ is finite. Then $M$ is said to have \emph{trivial Tate cohomology} if for every subgroup $S \le G$
		and every $n \in \Z$, $H^n_{\Tate}(S,M) \cong 0$.
	\end{itemize}
	(We will later see that for a finite group $G$, the three concepts are equivalent.)
\end{definition}

In this section we shall construct certain representations with trivial homology and cohomology.

\begin{definition}\label{def:induced}
	\lean{
		Representation.coind₁,
		Rep.coind₁_obj,
		Rep.coind₁,
		Rep.ind₁
	}
	\leanok
	Let $G$ be a group, $R$ a commutative ring and $A$ an $R$-module.
	\begin{itemize}
		\item
		There is a representation of $G$ over $R$
		on the space of all functions $f : G \to A$. The action of an element $g \in G$ on $f$
		is defined by
		\[
			(g \bullet f) (x) = f(xg).
		\]
		This representation is called the coinduced representation and is denoted $\coind_1(G,A)$.
		\item
		There is a representation of $G$ over $R$
		on the space of all finitely supported functions $f : G \to_0 A$.
		The action of an element $g \in G$ on $f$ is defined by
		\[
			(g \bullet f) (x) = f(g^{-1}x), \qquad i.e.
			g \bullet \single(x,m) = \single(gx,m).
		\]
		This representation is called the induced representation and is denoted $\ind_1(G,A)$.
	\end{itemize}
	More precisely, $\coind_1(G,-)$ and $\ind_1(G,-)$ are both functors from $\Mod(R)$ to $\Rep(R,G)$.
\end{definition}

\begin{lemma}	\label{lem:coind₁ trivial cohomology}
	\lean{Rep.coind₁_trivialCohomology}
	\uses{def:trivial cohomology,
		def:induced}
	\leanok
	The representation $\coind_1(G,A)$ has trivial cohomology.
\end{lemma}

\begin{proof}
  There is an elementary proof outlined in lean file involving cocycles which we describe here.
	A more intuitive method of proof would give a more general statement (Shapiro's Lemma).
	The proof given here is most easily stated in terms of inhomogeneous cochains, rather than
	the homogeneous cochains in Mathlib, so we explain the proof in that context first, before
	reformulating the same proof in terms of inhomogeneous cochains.

  Choose any subgroup $S$ of $G$ and let $n > 0$; we shall prove that $H^n(S,\coind_1(A))\cong 0$.
	Let $\{g_i\}$ be a set of coset representatives for $G/S$.
  Recall that a homogeneous $n$-cochain on $S$ with values in $\coind_1(A)$
  is a function $\sigma : S^{n+1} \to (G \to A)$ satisfying
	(for all $s,s_0,\ldots,s_n\in S$ and $g \in G$) the following homogeneity condition:
	\[
		\sigma (ss_0, ... , ss_n) (g) = \sigma (s_0,...,s_n) (gs).
	\]
  The cochain $\sigma$ is a cocycle if it satisfies the following cocycle relation
	for all $s_i \in S$, $g \in G$:
	\[
		\sum_i (-1)^i  \sigma (s_0, ... ,\hat{s_i}, ... , s_{n+1}) (g) = 0.
	\]
  Given a homogeneous $n$-cocycle $\sigma$, we'll define a homogeneous $n-1$-cochain $\tau$ by
	\[
    \tau (s_0,...,s_{n-1}) (g_i) = \sigma (s^{-1},s_0,...,s_{n-1}) (g_i s).
	\]
  The cocycle relation for $\sigma$ implies $d^{n-1} \tau = \sigma$, so $\sigma$ is a coboundary.

  Let's rephrase this in terms of inhomogeneous cocycles.
	The inhomogeneous cocycle corresponding to $\sigma$ is
	\[
    \sigma' (s_1,...,s_n) (g_i s) = \sigma (1,s_1,s_1 s_2,..., s_1 \cdots s_n) (g_i s)
	\]
  and the inhomogeneous cochain corresponding to $\tau$ is
	\begin{align*}
		\tau' (s_1,...,s_{n-1}) (g_i s)
		&= \tau (1,s_1,... , s_1 \cdots s_{n-1}) (g_i s)\\
    &= \sigma (s^{-1}, 1, s_1, s_1 s_2,\ldots , s_1 \cdots s_n) (g_i s)\\
    &= \sigma (1, s, s s_1, s s_1 s_2, ..., s s_1 \cdots s_{n-1}) (g_i)\\
    &= \sigma' (s,s_1,\ldots,s_{n-1}) (g_i).
	\end{align*}
  The final formula above defines an inhomogeneous cochain $\tau' \in C^{n-1}(G,\coind_1(A))$,
	such that $d^{n-1} \tau' = \sigma'$.
	Therefore $H^n(S,\coind_1(A)) = 0$.
\end{proof}

\begin{lemma}	\label{lem:coind₁ invariants}
	\lean{Rep.coind₁_quotientToInvariants_iso,
		Rep.coind₁_quotientToInvariants_trivialCohomology}
	\uses{def:induced,
		lem:coind₁ trivial cohomology}
	\leanok
	Let $S$ be a normal subgroup of $G$. Then $\coind_1(G,A)^S$ is isomorphic to $\coind_1(G/S,A)$.
	In particular $\coind_1(G,A)^S$ is has trivial cohomology as a representation of $G/S$.
\end{lemma}

\begin{proof}
	Let $f : G \to A$. Then $f$ is in the subspace $\coind_1(G,A)^S$ if $f$ is constant on
	cosets of $S$, i.e. it descends to a function $G/S \to A$.
	This gives a linear bijection $\coind_1(G,A)^S \cong \coind_1(G/S,A)$, and it's trivial to check
	that this map is compatible with the actions of $G$.
\end{proof}

\begin{lemma}	\label{lem:ind₁ trivial homology}
	\lean{Rep.ind₁_trivialHomology}
	\uses{def:induced,
		def:trivial cohomology}
	\leanok
	The representation $\ind_1(G,A)$ has trivial homology.
\end{lemma}

\begin{proof}
	There is an elementary proof, similar to that of \ref{lem:coind₁ trivial cohomology}.
\end{proof}

\begin{definition} \label{def:ind₁ to coind₁}
	\lean{
		Representation.ind₁_toCoind₁,
		Rep.ind₁_toCoind₁,
		Representation.ind₁_toCoind₁,
		Representation.ind₁_toCoind₁_comm,
		Representation.ind₁_equiv_coind₁,
		Rep.ind₁_toCoind₁,
		Rep.instIsIsoAppModuleCatInd₁_toCoind₁OfFinite,
		Rep.ind₁_iso_coind₁}
	\uses{def:induced}
	\leanok
	There is a morphism of representations $\ind_1(G,A) \to \coind_1(G,A)$,
	which takes a finitely supported function $f : G \to_0 A$ to the function
	\[
		x \mapsto f(x^{-1}).
	\]
	If the group $G$ is finite then this map is an isomorphism.
	More precisely, this is an isomorphism of functors $\ind_1(G,-) \cong \coind_1(G,-)$.
\end{definition}

\begin{lemma}	\label{lem:induced trivial Tate}
	\lean{Rep.ind₁_trivialCohomology,
		Rep.coind₁_trivialHomology,
		Rep.ind₁_trivialTateCohomology}
	\uses{lem:Tate cohomology is cohomology or homology,
		def:ind₁ to coind₁,
		lem:coind₁ trivial cohomology,
		lem:ind₁ trivial homology}
	If the group $G$ is finite then $\ind_1(G,A)$ and $\coind_1(G,A)$ have trivial
	Tate cohomology.
\end{lemma}

\begin{proof}
	These representations are isomorphic, so it's
	sufficient to prove that $\ind_1(G,A)$ has trivial Tate cohomology
	(this is the more convenient case to prove).
	We already know that $\ind_1(G,A)$ has trivial homology.
	Also, since it is isomorphic to $\coind_1(G,A)$, it must have trivial cohomology.
	It only remains to prove that $H^0_{\Tate}(S,\ind_1(M))$
	and $H^{-1}_{\Tate}(S,\ind_1(M))$ are zero	for all subgroups $S$ of $G$.

	Recall that $\ind_1(G,M)$ is the space of functions $G \to_0 M$, and the action of $G$ is by
	left-translation:
	\[
		g \bullet \single(x,m) = \single(gx,m).
	\]

	To prove that $H^0_{\Tate}(S,\ind_1(G,A))=0$, we use the isomorphism
	\ref{lem:Tate cohomology is cohomology or homology}:
	\[
		H^0_{\Tate}(S,\ind_1(G,A)) \cong \ind_1(G,A)^S / N_S \ind_1(G,A).
	\]
	A function $f : G \to_0 M$ is $S$-invariant if $f$ is constant on cosets $Sg$ of $S$.
	If we let $\{g_i\}$ be a set of coset representatives,
	then we have $f = N_S (\sum_i \single(g_i, f(g_i)))$.
	Therefore $H^0_{\Tate}(S,\ind_1(G,A))=0$.

	For the $n=-1$ case we use the isomorphism \ref{lem:Tate cohomology is cohomology or homology}:
	\[
		H^{-1}_{\Tate}(S,\ind_1(G,A))
		\cong
		\ker(N_S : \ind_1(G,A) \to \ind_1(G,A)) / I_S \ind_1(M),
	\]
	where $I_G \ind_1(M)$ is generated by elements of the form $s \bullet f - f$ for $s \in S$
	and $f : G \to M$.
	Suppose $f:G \to_0 M$ is in the kernel of $N_S$.
	This implies that the sum of the values of $f$ over each coset of $S$ is zero.
	We can then write $f$ in the form
	\begin{align*}
		f
		& = \sum_i \sum_{s \in S} (\single(sg_i, f(sg_i)) - \single(g_i,f(sg_i)))\\
		& = \sum_i \sum_{s \in S} (s \bullet \single(g_i, f(sg_i)) - \single(g_i,f(sg_i))).
	\end{align*}
	Therefore $f \in I_S \ind_1(M)$. This shows that $H^{-1}(S,\ind_1(M)) = 0$.
\end{proof}





\section{Dimension-shifting}

\subsection{Shifting $\up$}

\begin{definition} \label{def:coind₁'}
	\lean{Representation.coind₁',
		Rep.coind₁'}
	Let $G$ be a group and $M$ a representation of $G$ over a commutative ring $R$.
	There is a representation $\coind_1' (M)$ on the $R$-module of
	functions $G \to M$.
	The action of an element $g \in G$ on a function $f : G \to M$ is given by
	\[
		(g \bullet f)(x) = g \bullet (f (xg)).
	\]
\end{definition}

\begin{lemma}	\label{lem:coind₁' iso coind₁}
	\lean{Rep.coind₁'_obj_iso_coind₁}
	\uses{def:induced, def:coind₁'}
	\leanok
	The representations $\coind_1'(M)$ and $\coind_1(G,M)$ of $G$ are isomorphic.
	More precisely there is an isomorphism of functors
	$\coind_1' \cong \coind_1(G,-) \circ \Forget$, where $\Forget : \Rep(R,G) \to \Mod(R)$
	is the forgetful functor.
\end{lemma}

\begin{proof}
	The map $f \mapsto (x \mapsto x \bullet f(x))$ is an isomorphism
	from $\coind_1'(M)$ to $\coind_1(G,M)$.
\end{proof}

\begin{corollary}	\label{cor:coind₁' trivial cohomology}
	\lean{Rep.coind₁'_trivialCohomology}
	\uses{lem:coind₁' iso coind₁,
		lem:coind₁ trivial cohomology}
	\leanok
	The representation $\coind_1'(M)$ has trivial cohomology.
\end{corollary}

\begin{proof}
	This follows directly from Lemmas \ref{lem:coind₁' iso coind₁}
	and \ref{lem:coind₁ trivial cohomology}.
	\leanok
\end{proof}

\begin{corollary}	\label{cor:coind₁' invariants trivial cohomology}
	\lean{Rep.coind₁'_quotientToInvariants_trivialCohomology}
	\uses{lem:coind₁ invariants,
		lem:coind₁' iso coind₁,
		def:inflation restriction functors}
	Let $S$ be a normal subgroup of $G$. Then $\coind_1'(M)^S$ has trivial cohomology as a
	representation of $G/S$.
\end{corollary}

\begin{proof}
	We've seen in Lemma \ref{lem:coind₁' iso coind₁} that $\coind_1'(M)$
	is isomorphic to $\coind_1(M)$.
	Applying the functor $\Invar$, we obtain an isomorphism between $\coind_1'(M)^S$ and $\coind_1(M)^S$.
	The result then follows from Lemma \ref{lem:coind₁ trivial cohomology}.
\end{proof}

\begin{definition} \label{def:up}
	\lean{Representation.coind₁'_ι,
		Rep.coind₁'_ι,
		Rep.dimensionShift.instMonoAppCoind₁'_ι,
		Rep.dimensionShift.up,
		Rep.dimensionShift.upSes,
		Rep.dimensionShift.up_shortExact,
		Rep.dimensionShift.up_shortExact_res}
	\uses{def:coind₁'}
	There is an injective morphism $M \to \coind_1'(M)$ which takes a vector $m \in M$
	to the constant function on $G$ with value $m$.
	We define a representation $\up(M)$ to be the cokernel of this map, so that we have a short exact
	sequence
	\[
		0 \to M \to \coind_1'(M) \to \up(M) \to 0.
	\]
	This construction is functorial in $M$;
	in particular for every $f : M_1 \to M_2$ in $\Rep(R,G)$,
	there is a commutative diagram
	\[
		\begin{matrix}
			0 & \to& M_1 & \to & \coind_1'(M_1) & \to& \up(M_1) \to 0 \\
			&&\downarrow &&\downarrow&&\downarrow \\
			0 & \to& M_2 & \to & \coind_1'(M_2) & \to& \up(M_2) \to 0 \\
		\end{matrix}.
	\]
\end{definition}

\begin{corollary}	\label{cor:up iso}
	\lean{Rep.dimensionShift.up_δ_zero_epi,
		Rep.dimensionShift.up_δ_isIso,
		Rep.dimensionShift.up_δiso,
		Rep.dimensionShift.up_δ_zero_epi_res,
		Rep.dimensionShift.up_δ_isIso_res,
		Rep.dimensionShift.up_δiso_res}	\lean{Rep.dimensionShift.up_δiso_natTrans}

	\uses{def:up,
		cor:coind₁' trivial cohomology}
	\leanok
	Let $S$ be any subgroup of $G$ and let $n \ge 1$.
	Then the connecting map from the long exact sequence $H^{n}(S,\up(M)) \to H^{n+1}(S,M)$ is an
	isomorphism.
	The corresponding map $H^{0}(S,\up(M)) \to H^{1}(S,M)$ is	surjective.

	The isomorphism $H^{n}(G,\up(-)) \cong H^{n+1}(G,-)$ is an isomorphism of functors.
	This means that for every morphism $f : M \to N$ of representations,
	the following square commutes:
	\[
		\begin{matrix}
			H^{n}(G,\up(M)) & \cong & H^{n+1}(G,M) \\
			\downarrow && \downarrow \\
			H^{n}(G,\up(N)) & \cong & H^{n+1}(G,N)
		\end{matrix}.
	\]
\end{corollary}

\begin{proof}
	We have already shown in Corollary \ref{cor:coind₁' trivial cohomology}
	that $\coind_1'(M)$ has trivial cohomology, so $H^{r}(S,\coind_1'(M))=0$
	for all $r>0$. This implies that the connecting maps are isomorphisms.

	The commuting square follows from
	\texttt{HomologicalComplex.HomologySequence.$\delta$\_naturality}
	because the short exact sequence $0 \to M \to \coind_1'(M) \to \up(M) \to 0$
	is functorial in $M$.
\end{proof}


\subsection{Shifting $\down$}
Let $G$ be a group and $M$ a representation of $G$ over a commutative ring $R$.

\begin{definition} \label{def:ind₁'}
	\lean{Representation.ind₁',
		Rep.ind₁'}
	There is a representation $\ind_1' (M)$ on the $R$-module of finitely supported
	functions $G \to_0 M$.
	The action of an element $g \in G$ on a function $f : G \to_0 M$ is given by
	\[
		(g \bullet f)(x) = g \bullet (f (g^{-1}x)),\qquad
		\text{i.e. }
		g \bullet \single(g,m) = \single(gx, g\bullet m).
 	\]
	The map $\ind_1'$ is functorial in $M$.
\end{definition}

\begin{lemma}	\label{lem:ind₁' iso ind₁}
	\lean{
		Representation.ind₁'_lequiv,
		Representation.ind₁'_lequiv_comm,
		Rep.ind₁'_obj_iso,
		Rep.ind₁'_iso_forget₂_ggg_ind₁
	}
	\uses{def:ind₁',
		def:induced}
	\leanok
	The representations $\ind_1'(M)$ and $\ind_1(G,M)$ are isomorphic; more precisely the
	functors $\ind_1'$ and $\ind_1(G,-) \circ \Forget$ are isomorphic.
\end{lemma}

\begin{proof}
	The data of the isomorphism is contained in the lean file; the isomorphism
	takes $f : G \to_0 M$ to the finitely supported function
	\[
		x \mapsto x^{-1} \bullet f(x).
	\]
	It remains to check linearity and naturality.
\end{proof}

\begin{corollary}	\label{cor:ind₁' trivial homology}
	\lean{Rep.ind₁'_trivialHomology}
	\uses{lem:ind₁' iso ind₁,
		lem:ind₁ trivial homology}
	\leanok
	The representation $\ind_1'(M)$ has trivial homology.
\end{corollary}

\begin{proof}
	\leanok
	We've shown that $\ind_1'(M)$ is isomorphic to $\ind_1(M)$, which is already known to
	have trivial homology.
\end{proof}

% \begin{corollary}	\label{cor:ind₁' iso coind₁'}
% 	\lean{Rep.ind₁'_iso_coind₁',
% 		Rep.ind₁'_trivialCohomology,
% 		Rep.coind₁'_trivialHomology}
% 	\uses{lem:ind₁' iso ind₁,
% 		def:ind₁ to coind₁,
% 		lem:coind₁' iso coind₁}
% 	\leanok
% 	If the group $G$ is finite then $\ind_1'(M) \cong \coind_1'(M)$.
% 	In particular $\ind_1'(M)$ and $\coind_1'(M)$ have both trivial homology and trivial cohomology.
% \end{corollary}

% \begin{proof}
% 	Since $G$ is assumed to be finite we have an isomorphism $\ind_1 \cong \coind_1$.
% 	\leanok
% \end{proof}

\begin{definition} \label{def:down}
	\lean{Representation.ind₁'_π,
		Representation.ind₁'_π_comm,
		Rep.ind₁'_π, Rep.instEpiAppInd₁'_π,
		Rep.dimensionShift.down,
		Rep.dimensionShift.down_ses,
		Rep.dimensionShift.down_shortExact,
		Rep.dimensionShift.down_shortExact_res
	}
	\uses{def:ind₁'}
	For any representation $M$, there is a surjective morphism $\ind_1'(M) \to M$,
	which takes a finitely supported function $f : G \to_0 M$ to the sum $\sum_{x \in G} f (x)$.
	We define $\down(M)$ to be the kernel of this map.
	There is therefore a short exact sequence
	\[
		0 \to \down(M) \to \ind_1'(M) \to M \to 0.
	\]
	Both $\down(M)$ and the short exact seqeunce are functors of $M$; this means that for
	every map $f : M \to N$ in $\Rep(R,G)$, we have a commutative diagram:
	\[
		\begin{matrix}
			0 & \to & \down(M) &\to &\ind_1'(M)& \to& M & \to & 0 \\
			&&\downarrow && \downarrow && \downarrow \\
			0 & \to & \down(N) &\to &\ind_1'(N)& \to& N & \to & 0
		\end{matrix} .
	\]
\end{definition}

% \begin{lemma}	\label{lem:down iso}
% 	\lean{
% 		Rep.dimensionShift.down_δ_zero_epi,
% 		Rep.dimensionShift.down_δ_zero_res_epi,
% 		Rep.dimensionShift.down_δ_isIso,
% 		Rep.dimensionShift.down_δiso,
% 		Rep.dimensionShift.down_δiso_natTrans,
% 		Rep.dimensionShift.down_δ_res_isIso,
% 		Rep.dimensionShift.down_δiso_res
% 	}
% 	\uses{def:down,
% 		cor:ind₁' trivial homology}
% 	\leanok
% 	For any subgroup $S$ of $G$ and any $n \ge 1$, the connecting
% 	map in the long exact sequence is an isomorphism:
% 	\[
% 		H_{n}(S,\down(M)) \cong H_{n+1}(S,M).
% 	\]
% 	More precisely this is an isomorphism of functors.
% \end{lemma}

% \begin{proof}
% 	This follows because $\ind_1'(M)$ has trivial homology.
% \end{proof}

\begin{lemma} \label{lem:induced' trivial Tate}
	\lean{groupCohomology.TateCohomology_coind₁,
		groupCohomology.TateCohomology_coind₁',
		groupCohomology.TateCohomology_ind₁'}
	\uses{lem:induced trivial Tate,
		lem:ind₁' iso ind₁,
		lem:coind₁' iso coind₁}
	\leanok
	If $M$ is a representation of a finite group $G$ then the representations
	$\ind_1'(M)$ and $\coind_1'(M)$ have trivial Tate cohomology.
\end{lemma}

\begin{proof}
	This follows from \ref{lem:induced trivial Tate}
	together with the isomorphisms \ref{def:ind₁ to coind₁},
	\ref{lem:coind₁' iso coind₁} and \ref{lem:ind₁' iso ind₁}.
\end{proof}

\begin{corollary}	\label{cor:Tate up down isos}
	\lean{groupCohomology.instIsIsoModuleCatδ,
		groupCohomology.instIsIsoModuleCatδ_1,
		groupCohomology.upδiso_Tate,
		groupCohomology.downδiso_Tate
	}
	\uses{
		def:up,
		def:down,
		lem:induced' trivial Tate,
		def:Tate long exact sequence}
	\leanok
	If the group $G$ is finite then for every subgroup $S$ of $G$
	and every $n \in \Z$ we have isomorphisms
	\[
		H^n_{\Tate}(S, \up(M)) \cong H^{n+1}_{\Tate}(S,M),
		\qquad
		H^{n+1}_{\Tate}(S, \down(M)) \cong H^{n}_{\Tate}(S,M).
	\]
\end{corollary}

\begin{proof}
	These are the connecting homomorphisms from the
	short exact sequences linking $\up(M)$ and $\down(M)$ to $M$.
	They are isomorphisms because $\coind_1'(M)$ and $\ind_1'(M)$ have trivial Tate cohomology.
\end{proof}


As a simple example we consider the case of the trivial representation $R$.
The induced representation is then the group ring $RG$, which is referred to
Mathlib as \verb|Rep.leftRegular R G|; this is a free $R$-module with basis
$\single(g,1)$ for $g \in G$.
For simplicity we shall write $[g]$ for the basis vector $\single(g,1)$.
The map $\ind_1'(R) \to R$ takes $\sum_{g\in G} x_g [g]$ to $\sum_{g \in G} x_g$.
This map is commonly called the augmentation, and its kernel $\down(R)$ the augmentation module.
We shall write $\aug(R,G)$ for this kernel.
The kernel $\aug(R,G)$ is spanned by the elements $[g]-[1]$ for $g \in G$.
Note that $I_G \aug(R,G)$ is spanned by elements of the form $[gh]-[h] -[g] + [1]$.

\begin{lemma} \label{lem:homology 0 aug}
	Let $G$ be a finite group.
	Then there is an isomorphism of $R$-modules
	\[
		G^{\ab} \otimes_{\Z} R \cong H_0(G,\aug(R,G)),
	\]
	which takes an element $g \otimes 1$ for $g \in G$ to the coset of $[g]-[1]$
	in $\aug(R,G) / I_G \aug(R,G)$.
	In particular, taking $R = \Z$ we have an isomorphism
	\[
		G^{\ab} \cong H_0(G,\aug(\Z,G)).
	\]
\end{lemma}

\begin{proof}
	We'll first define a function $\phi : G \to H_0(G,\aug(G,R))$	by $\phi (g) = [g]-[1]$.
	The following calculation shows that $\phi$ is a group homomrphism.
	\begin{align*}
		\phi(gh)
		&= \phi(g) +\phi(h) + ([gh]-[1]) -([g]-[1]) - ([h]-[1])\\
		&= \phi(g) +\phi(h) + [gh] - [g] - [h] + [1]\\
		&\equiv \phi(g) +\phi(h) \bmod  I_G \aug(R,G).
	\end{align*}
	It follows that $\phi$ descends to a homomorphism $G^{\ab} \to H_0(G,\aug(R,G))$, which
	may be extended uniquely to a linear map $G^{\ab} \otimes R \to H_0(G,\aug(R,G))$.

	Next we define a linear map $\psi : \aug(G,R) \to G^{\ab} \otimes R$
	taking the generator $[g]-[1]$ to $g \otimes 1$.
	It's trivial to check that $I_G\aug(R,G)$ is in the kernel of $\psi$, so $\psi$ descends to
	a map $H_0(G,\aug(R,G)) \to G^{\ab} \otimes R$.
	The two maps are easily seen to be inverses.
\end{proof}

Suppose now that the group $G$ is finite.
The map $N_G : \aug(R,G) \to \aug(R,G)$ in this case is zero, so we have
\begin{equation}
	\label{eq:Tate -1 aug}
	H^{-2}(G,\Z) \cong H^{-1}_{\Tate}(G,\aug(\Z,G)) \cong H_{0}(G, \aug(\Z,G)) \cong G^{\ab}.
\end{equation}

% \begin{remark}
% 	By modifying the proof above one can prove that for any trivial module $M$ we have
% 	\[
% 		G^{\ab} \otimes_\Z M \cong H^{-1}_{\Tate}(G,\down(M)).
% 	\]
% \end{remark}


% \begin{lemma}
% 	Let $G$ be a finite group. Then there is an isomorphism $G^{\ab}$ \cong $H^{-2}_{\Tate}(G,\Z)$.
% \end{lemma}

% \begin{proof}
% 	(There is a current PR proving this for group homology without the assumption that $G$ is finite.)
% 	This follows from the previous lemma because $\aug(\Z,G) \cong \down(\Z)$.
% \end{proof}





\section{The inflation-restriction sequence}

\begin{theorem}
	\label{thm:inflation restriction sequence}
	\lean{groupCohomology.inflationRestriction,
		groupCohomology.inflation_restriction_mono,
		groupCohomology.inflation_restriction_exact}
	\uses{def:up,
		cor:coind₁' invariants trivial cohomology,
		lem:inflation restriction naturality}
	\leanok
	Let $S$ be a normal subgroup of a group $G$ and let $n$ be a positive integer.
	Assume that for all natural numbers $0 <i < n$ we have $H^{i}(S,M) \cong 0$.
	Then the following sequence is exact:
	\[
		0 \to H^{n}(G/S, M^S) \to H^{n}(G,M) \to H^{n}(S,M),
	\]
	where the first map is inflation and the second is restriction.
\end{theorem}

\begin{proof}
	This is already in Mathlib for $n=1$.
	Assume the result is true for $n$; we will prove it for $n+1$
	by dimension-shifting.

	Let $M$ be a representation such that $H^i(S,M)=0$ for all $0 < i < n+1$.
	This implies $H^i(S,\up(M)) = 0$ for all $0 < i < n$.
	Hence by the inductive hypothesis the following sequence is exact:
	\[
		0 \to H^n( G/S, \up(M)^S) \to H^n(G, \up(M)) \to H^n(S,\up(M)).
	\]
	Recall that we have a short exact sequence of representations of $G$:
	\[
		0 \to M \to \coind_1'(M) \to \up(M) \to 0.
	\]
	Since $0 < 1 < n+1$ we have $H^1(S,M)=0$,
	so by taking $S$-invariants we obtain a short exact sequence of
	$G/S$-modules:
	\[
		0 \to M^S \to \coind_1'(M)^S \to \up(M)^S \to 0.
	\]
	By \ref{cor:coind₁' invariants trivial cohomology}, $\coind_1'(M)^S$ has trivial cohomology,
	so we have an isomorphism
	\[
		 H^n(G/S, \up(M)^S) \to H^{n+1}(G/S, M^S).
	\]
	We now have a diagram where the horizontal maps are inflation and restriction maps
	and the vertical maps are dimension-shifting isomorphisms.
	\[
		\begin{matrix}
			0 &\to& H^{n}(G/S, \up(M)^S) &\to &H^{n}(G,\up(M)) & \to & H^n(S,\up(M)) \\
			  &   &   \downarrow              &    &  \downarrow         &     &  \downarrow  \\
			0 &\to& H^{n+1}(G/S, M^S) &\to &H^{n+1}(G,M) & \to & H^{n+1}(S,M).
		\end{matrix}
	\]
	The diagram commutes by \ref{lem:inflation restriction naturality}.
	The first row is exact by the inductive hypothesis.
	Therefore the second row is also exact.
\end{proof}




\section{Corestriction}

Let $S$ be a subgroup of $G$. We have already discussed the restriction map
$H^\bullet(G,M) \to H^\bullet(S,M)$.
In the case that $S$ has finite index in $G$ there is also a ``corestriction map'' which
goes in th other direction, i.e. $\cor : H^\bullet (S,-)$ to $H^\bullet(G,-)$.
We define this now, and point out some easy consequences of the definition.

\begin{definition} \label{def:corestriction}
	Let $S$ be a subgroup of finite index in $G$ and let $\{r_i\}$
	be a set of representatives for the cosets $r_i S$.
	For any representation $M$ of $G$ there is a linear map $N_{G/S} : M^S \to M^G$
	defined by
	\[
		N_{G/S}(m) = \sum_i r_i \bullet m.
	\]
	This map does not depend on the choince of coset representatives.
	Also, the map $N_{G/S}$ is a morphism of functors, i.e. for every map $f : A \to B$ in
	$\Rep(R,G)$ we have a commuting square in $\Mod(R)$:
	\[
		\begin{matrix}
			A^S & \to & B^S \\
			\downarrow && \downarrow \\
			A^G & \to & B^G
		\end{matrix},
	\]
	where the horizontal maps are induced by $f$ and the vertical maps are $N_{G/S}$.

	The corestriction maps $\cor^n : H^n(S,M) \to H^n(G,M)$ are defined recursively as follows:
	\begin{itemize}
		\item
		The map $\cor^0 : H^0(S,M) \to H^0(G,M)$ is defined to be $N_{G/S}$.
		\item
		Assume that we have defined $\cor^n$. For any $M$ we have a commutative diagram
		in which the rows are exact and the vertical arrows are $\cor^n$:
		\[
			\begin{matrix}
				H^n(S,\coind_1'(M)) & \to & H^n(S,\up(M)) & \to &H^{n+1}(S,M) & \to & 0 \\
				\downarrow &&\downarrow \\
				H^n(S,\coind_1'(M)) & \to & H^n(S,\up(M)) & \to &H^{n+1}(S,M) & \to & 0
			\end{matrix}.
		\]
		It follows that there is a unique linear map $\cor^{n+1} : H^{n+1}(S,M) \to H^{n+1}(G,M)$
		such that the following square commutes:
		\[
			\begin{matrix}
				H^n(S,\up(M)) & \to & H^{n+1}(S,M) \\
				\downarrow &&\downarrow \\
				H^n(S,\up(M)) & \to &H^{n+1}(S,M)
			\end{matrix}.
		\]
	\end{itemize}
	The map $\cor^{n} : H^n(G , -) \to H^n(S,-)$ is a morphism of functors.
\end{definition}

\begin{lemma} \label{lem:cor comp rest}
	For all $\sigma \in H^n(G,M)$ we have
	\(\cor(\rest(\sigma)) = [G:S] \cdot \sigma\).
\end{lemma}

\begin{proof}
	We'll prove the result by induction on $n$.
	In the case $n = 0$, this follows from the relation for all $m \in M^G$:
	\[
		N_{G/S} (m) = [G:S] \cdot m,
	\]
	The identity above holds because each term in the sum defining $N_{G/S}(m)$ is equal to $m$.

	Let's assume that the lemma is true for some $n$.
	We then have a diagram in which the vertical maps are the dimension shifting maps,
	which are all surjective:
	\[
		\begin{matrix}
			H^{n}(G,\up\ M) &  \stackrel{\rest}\to &
			H^{n}(S,\up\ M) &  \stackrel{\cor}\to & H^{n}(G,\up\ M)\\
			\downarrow &&\downarrow &&\downarrow \\
			H^{n+1}(G, M) & \stackrel{\rest}\to &
			H^{n+1}(S,M) & \stackrel{\cor}\to & H^{n+1}(G,M)
		\end{matrix}.
	\]
	By the inductive hypothesis,
	the composition of the maps on the top row is multiplication by $[G:S]$.
	The square on the left commutes by \ref{lem:inflation restriction naturality},
	and the square on the right commutes by definition of the corestriction map.
	Therefore the composition on the bottom row is multiplication by $[G:S]$.
\end{proof}


\begin{corollary} \label{cor:cohomology G-torsion}
	If $M$ is a representation of a finite group $G$ then for
	all $n \in \Z$ and all $\sigma \in H^n_{\Tate}(G,M)$ we have $|G| \cdot \sigma = 0$.
\end{corollary}

\begin{proof}
	By dimension-shifting it's enough to prove the result for $n > 0$, in which case
	Tate cohomology is the same as cohomology.
	Take $S$ to be the trivial subgroup $1$ of $G$.
	By \ref{lem:cor comp rest} it's sufficient to prove that $\cor(\rest(\sigma))= 0$.
	This follows because $\rest(\sigma) \in H^n(1,M) \cong 0$.
\end{proof}

\begin{corollary} \label{cor:cohomology sub Sylow}
	Let $M$ be a representation of a finite group $G$ and let $S_p$ be a Sylow $p$-
	subgroup of $G$ for some prime number $p$.
	Then for any $n \in \Z$, $H^n_{\Tate}(G,M)[p^\infty]$ is isomorphic to an $R$-submodule
	of $H^n_{\Tate}(S_p,M)$.
\end{corollary}

\begin{proof}
	By dimension-shifting it's enough to prove the result for $n > 0$, in which case
	Tate cohomology is the same as cohomology.
	It follows from \ref{lem:cor comp rest} that the
	composition $\cor \circ \rest$ is injective on $H^n(G,M)[p^\infty]$.
	Therefore the restriction map is an injective map from $H^n(G,M)[p^\infty]$
	to $H^n(S_p,M)$.
\end{proof}



\section{Periodicity for finite cyclic groups}

In this section we shall assume that $G$ is a finite cyclic group of order $n$.
We shall write $\gen$ for a fixed generator of $G$.

\begin{definition} \label{def:up iso down}
	\lean{Representation.map₁,
		Representation.map₁_ker,
		Representation.map₂_range,
		Rep.up_iso_down}
	Given any representation $M$ of $G$, there is a map
	$\map_1 : \coind_1'(M) \to \coind_1'(M)$ which takes a function $f : G \to M$ to the function
	\[
		x \mapsto f(x) - f(\gen\cdot x).
	\]
	The kernel of $\map_1$ consists of the constant functions $G \to M$, i.e. the image of the
	map $M \to \coind_1'(M)$.
	Hence by the first isomorphism theorem, the image of $\map_1$ is isomorphic to $\up(M)$.

	Since $G$ is finite, the representations $\coind_1'(M)$ and $\ind_1'(M)$
	are isomorphic, and we define $\map_2$ to be the corresponding map $\ind_1'(M) \to \ind_1'(M)$.
	This is given by
	\[
		\map_2(f) (x) = f(x) - f(x\cdot \gen^{-1}).
	\]
	\begin{lemma}
		The image of $\map_2 : \ind_1'(M) \to \ind_1'(M)$ is precisely the set of functions $G \to_0 M$
		which sum to zero. This is the kernel of the map $\ind_1'(M) \to M$,
		which we are calling $\down(M)$.
	\end{lemma}

	\begin{proof}
		It's clear that the values of $\map_2(f)$ sum to $0$, so the image of $\map_2$ is contained in
		the kernel.
		Conversely suppose $h :G \to_0 M$ satisifies $\sum_{i=0}^{n-1} h(\gen^i) = 0$.
		Then we have
		\begin{align*}
			h
			& = \sum_{0}^{n-1} \single(gen^i, h(\gen^i))\\
			& = \sum_{0}^{n-1} (\single(gen^i, h(\gen^i)) - \single(1, h(\gen^i))).
		\end{align*}
		Furthermore each of the terms $\single(gen^i, m) - \single(1, m)$ is in the
		image of $\map_2$:
		\begin{align*}
			\map_2 (\single(1,m) + \cdots + \single(\gen^{i-1},m))
			&=\single(1,m) - \single(\gen^i,m).
		\end{align*}
	\end{proof}

	We have a commutative square with vertical isomorphisms:
	\[
		\begin{matrix}
			\ind_1'(M) & \stackrel{\map_2}\to & \ind_1'(M) \\
			\downarrow && \downarrow \\
			\coind_1'(M) & \stackrel{\map_1}\to & \coind_1'(M) \\
		\end{matrix}.
	\]
	It follows that $\image(\map_1) \cong \image(\map_2)$,
	i.e.
	\[
		\up(M) \cong \down(M).
	\]
	This is an isomorphism of functors; i.e. for each map $f : M \to N$ in $\Rep(R,G)$
	we have a commuting square:
	\[
		\begin{matrix}
			\up(M) & \stackrel{\up(f)}\to & \up(N) \\
			\downarrow && \downarrow \\
			\down(M) & \stackrel{\down(f)}\to & \down(N)
		\end{matrix}.
	\]
\end{definition}

\begin{corollary} \label{cor:periodic cohomology}
	\uses{cor:Tate up down isos,
		def:up iso down}
	\lean{Rep.periodicCohomology}
	Let $G$ be a finite cyclic group.
	For all $n > 0$ and all representations $M$
	we have an isomorphism $H^{n}(G,M) \cong H^{n+2}(G,M)$.
	Similarly for all integers $n$ we have isomorphisms $H^{n}_{\Tate}(G,M) \cong H^{n+2}_{\Tate}(G,M)$.
\end{corollary}

\begin{proof}
	By the dimension-shifting isomorphisms we have
	$H^{n}(G,M) \cong H^{n+1}(G,\down(M)) \cong H^{n+1}(G,\up(M)) \cong H^{n+2}(G,M)$,
	and similarly for Tate cohomology.
\end{proof}

A very important example for us is the trivial representation of $G$ on $\Z$, which we describe
very precisely here:

\begin{lemma} \label{lem:H2 cyclic Z}
	\uses{cor:periodic cohomology}
	Let $G$ be a finite cyclic group of order $n$ generated by an element $\gen$.
	Then $H^1(G,\Z) \cong 0$ and $H^2(G,\Z) \cong \Z/n\Z$.
	Explicitely, the isomorphism $\inv_\Z : H^2(G,\Z) \cong \Z/n\Z$ is given by the map
	(for a 2-cocycle $\sigma$)
	\[
		\inv_\Z (\sigma) = \sum_{i=0}^{n-1} \sigma(\gen^i,\gen).
	\]
	The pre-image of $1 \in \Z/n\Z$ is the cohomology class of the cocycle
	\[
		\sigma_1 (\gen^i, \gen^j) = \begin{cases}
			1 & i+j \ge n \\
			0 & i+j < n,
		\end{cases}
		\qquad 0 \le i,j < n.
	\]
\end{lemma}

\begin{proof}
	It is easy to check that the formula for $\inv_\Z$ defines a homomorphism
	$H^2(G,\Z) \to \Z / n \Z$ (i.e. the coboundaries are in the kernel).
	Furthermore we can check that $\sigma_1$ is a 2-cocycle
	and is a preimage of $1 \in \Z/n\Z$.
	It follows that the map $\inv_\Z : H^2(G,\Z) \to \Z/n\Z$ is surjective.

	Since the module $\Z$ is trivial, we have $H^1(G,\Z)\cong \Hom(G,\Z) \cong 0$.
	It follows from \ref{lem:Tate cohomology is cohomology or homology}
	that $H^0_{\Tate}(G,\Z) \cong \Z /n\Z$.
	Hence by periodicity there is an isomorphism $H^2(G,\Z) \cong \Z/ n\Z$.
	It follows that $\inv_\Z$ is an isomorphism.
\end{proof}





\section{Herbrand quotients}

\begin{definition} \label{def:herbrand quotient}
	\uses{def:Tate cohomology}
	Let $G$ be a finite cyclic group and $M$ a representation of $G$.
	Recall that there are isomorphisms $H^n_{\Tate}(G,M) \cong H^{n+2}_{\Tate}(G,M)$.
	We define the Herbrand quotient of $M$ to be
	\[
		h(G,M) = \frac{|H^0_{\Tate}(G,M)|}{|H^1_{\Tate}(G,M)|}.
	\]
	If either of the two cohomology groups are infinite then $h(G,M)$ defaults to $0$.
\end{definition}

\begin{example} \label{lem:herbrand Z}
	If $G$ is a cyclic group and $\Z$ has the trivial action of $G$ then $h(G,\Z) = |G|$.
	This follow immediately \ref{lem:H2 cyclic Z}
\end{example}


\begin{lemma} \label{lem:herbrand finite}
	\uses{lem:Tate cohomology is cohomology or homology}
	If $M$ is finite then $h(G,M)=1$.
\end{lemma}

\begin{proof}
	Let $\gen$ be a generator of $G$.
	Recall that $H^0_{\Tate}(G,M) \cong M^G / N_GM$.
	Also, we can write $M^G$ as $\ker(1-\gen : M \to M)$.
	Similarly $H^{-1}_{\Tate}(G,M)$ is isomorphic to $\ker (N_G : M \to M) / \image (1-\gen : M \to M)$.
	The result follows because
	\begin{align*}
		|\ker(N_G : M \to M)| \cdot |\image(N_G : M \to M)|
		&=|M|\\
		&=|\ker(1-g : M \to M)| \cdot |\image(1-g : M \to M)|.
	\end{align*}
\end{proof}

\begin{lemma} \label{lem:herbrand ses}
	Suppose we have a short exact sequence of representations of a finite cyclic group $G$:
	\[
		0 \to A \to B \to C \to 0.
	\]
	If two of the representations $A$, $B$, $C$ has non-zero Herbrand quotient then so
	does the third, and $h(G,B) = h(G,A) \cdot h(G,C)$.
\end{lemma}

\begin{proof}
	It follows from the long exact sequence that if two of the representations $A,B,C$
	have finite cohomology groups then so does the third.
	Also, by periodicity, the long exact sequence reduces to an exact hexagon:
	\[
		\begin{matrix}
			&& H^0_{\Tate}(G,B) \\
			&\nearrow && \searrow \\
			H^0_{\Tate}(G,A)  && && H^0_{\Tate}(G,C) \\
			\uparrow & & & & \downarrow \\
			H^1_{\Tate}(G,C) &&&& H^1_{\Tate}(G,A) \\
			& \nwarrow && \swarrow\\
			&& H^1_{\Tate}(G,B)
		\end{matrix}.
	\]
	The result follows because the alternating product of the
	finite group orders in the hexagon is $1$.
\end{proof}



\section{The Triviality Criterion}

Recall that a representation $M$ of a group $G$ has trivial cohomology if for all subgroups $H$ of
$G$ and all $n \in \N$, the cohomology groups $H^{n+1}(H,M)$ are zero.

\begin{theorem} \label{thm:triviality criterion solvable}
	\lean{groupCohomology.trivialCohomology_of_even_of_odd_of_solvable}
	Let $M$ be a representation of a finite solvable group $G$.
	Suppose we have positive natural numbers $e$ and $o$ with $e$ even and $o$ odd,
	such that for all subgroups $S$ of $G$ we have
	\[
		H^e(S,M) \cong 0, \qquad H^o(S,M) \cong 0.
	\]
	Then $M$ has trivial cohomology.
\end{theorem}

\begin{proof}
	We must prove that $H^{n}(S,M) = 0$ for all $S$ and all $n > 0$.
	We'll prove this by induction on $S$. The result is true for the trivial subgroup of $G$.
	Assume that the result is true for $S$, and assume that $S' / S$ is cyclic.
	The inductive hypothesis implies that (for all $n$) the inflation restriction sequence is exact:
	\[
		0 \to H^{n} (S'/S, M^S) \to H^{n}(S' , M) \to H^{n}(S,M)= 0.
	\]
	We therefore have isomorphisms $H^{n} (S'/S, M^S) \cong H^{n}(S' , M)$.
	In particular we have $H^{e} (S'/S, M^S) \cong 0$ and $H^{o} (S'/S, M^S) \cong 0$.
	Using periodicity of the cohomology of a cyclic group, we have $H^{n}(S'/S,M^S) \cong 0$
	for all $n>0$.
\end{proof}

\begin{theorem} \label{thm:triviality criterion}
	\uses{thm:triviality criterion solvable}
	\lean{groupCohomology.trivialCohomology_of_even_of_odd}
	Let $M$ be a representation of a finite group $G$ (no longer assumed to be solvable).
	Suppose we have positive natural numbers $e$ and $o$ with $e$ even and $o$ odd, such that for all
	subgroups $S$ of $G$ we have
	\[
		H^e(S,M) =0, \qquad H^o(S,M) = 0.
	\]
	Then $M$ has trivial cohomology.
\end{theorem}

\begin{proof}
	Let $S$ be a subgroup of $G$.
	Fix a prime number $p$ and let $S_p$ be a Sylow $p$-subgroup of $S$.
	Since $S_p$ is solvable, \ref{thm:triviality criterion solvable} implies that
	$H^n(S_p,M) \cong 0$ for all $n > 0$.
	By \ref{cor:cohomology sub Sylow}, it follows that $H^n(S,M)[p^\infty] \cong 0$.
	Since this holds for all primes $p$,
	\ref{cor:cohomology G-torsion} implies that $H^n(S,M) \cong 0$.
\end{proof}

\begin{corollary}	\label{cor:up and down trivial cohomology}
	\lean{Rep.dimensionShift.up_trivialCohomology,
		Rep.dimensionShift.down_trivialCohomology}
	If $M$ is a representation of a finite group $G$ and $M$ has trivial cohomology
	then $\up(M)$ and $\down(M)$ have trivial cohomology.
\end{corollary}

\begin{proof}
	For each subgroup $S$ of $G$ we have
	\[
		H^1(S,\up(M)) \cong H^2(S,M) \cong 0,
		\qquad
		H^2(S,\up(M)) \cong H^3(S,M) \cong 0.
	\]
	By \ref{thm:triviality criterion} $\up(M)$ has trivial cohomology.
	Similarly
	\[
		H^2(S,\down(M)) \cong H^1(S,M) \cong 0,
		\qquad
		H^3(S,\up(M)) \cong H^2(S,M) \cong 0,
	\]
	so $\down(M)$ has trivial cohomology.
\end{proof}

\begin{theorem}
	\lean{groupCohomology.TateCohomology_of_trivialCohomology,
		Rep.trivialHomology_of_trivialCohomology}
	Let $M$ be a representation of a finite group $G$, and assume that $M$ has trivial cohomology.
	Then $M$ has trivial Tate cohomology.
\end{theorem}

\begin{proof}
	Fix an integer $n$ and choose a natural number $m$ such that $m + n > 0$.
	By \ref{cor:up and down trivial cohomology}, $\down^m(M)$ has trivial cohomology.
	Therefore
	\[
		H^n_{\Tate}(H,M) \cong H^{n+m}(H, \down^m(M)) \cong 0.
	\]
\end{proof}



% \section{The augmentation module $\aug(R,G)$}

% Let $G$ be a group and $R$ a commutative ring. We shall also write $R$ for the trivial
% representation of $G$ on $R$.
% The left regular representation of $G$ is the representation $\ind_1'(R)$, whose
% vectors consist of finitely supported functions $f : G \to_0 R$.
% There is a surjective morphism $\leftRegular(R,G) \to R$ which takes $f$ to $\sum_{x \in G} f(x)$.
% The augmentation module $\aug(R,G)$ is defined to be the kernel of this map.
% We therefore have a short exact sequence
% \[
% 	0 \to \aug(R,M) \to \leftRegular(R,G) \to R \to 0.
% \]
% If we assume that $G$ is finite, then we have shown above that $\leftRegular(R,G)$ has
% trivial cohomology.
% In particular we have isomorphisms for all $n \in \Z$ and all subgroups $H$ of $G$:
% \[
% 	H^n_{\Tate}(H,R) \cong H^{n+1}_{\Tate}(H,\aug(R,G)).
% \]

% \begin{lemma}
% 	Let $G$ be a finite group.
% 	Then for every subgroup $H$ of $G$ we have an isomorphism $H^1(H,\aug(R,G)) = R / |H| R$.
% \end{lemma}

% \begin{proof}
% 	Since $R$ is a trivial $H$-module, we have $H^0_{\Tate}(H,R) \cong R / |H| R$.
% \end{proof}


% \begin{lemma}
% 	Let $G$ be a finite group and assume that $R$ has no additive torsion.
% 	Then for all subgroups $H$ of $G$ we have $H^2(H,\aug(R,G)) = 0$.
% \end{lemma}

% \begin{proof}
% 	Since $R$ has no additive torsion we have
% 	$H^1(G,R) \cong \Hom(G,R) = 0$.
% \end{proof}


\section{The splitting module of a 2-cocycle}

Let $\sigma \in H^2(G,M)$.
In this section we describe a representation of $G$ called the \emph{splitting module of $\sigma$}.

We shall write $\sigma'$ for an inhomogeneous 2-cocycle representing $\sigma$.
This means $\sigma' : G \times G \to M$ satisfies the following 2-cocycle
relation for all $x,y,z\in G$
\begin{equation} \label{def:2-cocycle relation}
	\sigma'(x,y) + \sigma'(xy,z) = \sigma'(x,yz) + x \bullet \sigma'(y,z).
\end{equation}


\begin{definition} \label{def:splitting module}
	The splitting module of $\sigma'$ is the $R$-module $M \times \aug(R,G)$,
	with the action of an element $g \in G$ given by
	\[
		g \bullet (m,f)
		= \left(g \bullet m + \sum_{x \in G} f(x) \sigma'(g,x) , g \bullet f\right),
		\qquad m \in M, \; f \in \aug(R,G).
	\]
	(Although we don't need this fact right now, it's worth knowing that up to isomorphism,
	the splitting module depends only on the cohomology class $\sigma$. For this reason, we'll write
	$\Split(\sigma)$ for this representation).
\end{definition}

There is evidently a short exact sequence of representations of $G$.
\begin{equation}\label{eq:split ses}
	0 \to M \to \Split(\sigma) \to \aug(R,G) \to 0.
\end{equation}

\begin{lemma} \label{lem:splits in splitting module}
	\uses{def:splitting module}
	The image of $\sigma$ in $H^2(G,\Split(\sigma))$ is zero.
\end{lemma}

\begin{proof}
	We can check that the cocycle $\sigma'$ is the coboundary of
	the $1$-cochain $\tau : G \to \Split(\sigma)$ defined by
	\[
		\tau (x) = (x \bullet σ'(1,1), [x]-[1])
	\]
	(Here we are using the notation $[x]$
	to mean the function with value $1$ at $x$ and $0$ elsewhere).

	By definition we have
	\begin{align*}
		d\tau (x,y)
		&= \tau(x) + x \bullet \tau(y) - \tau(xy) \\
		&= (x \bullet σ'(1,1), [x]-[1])
		+ x \bullet (y \bullet σ'(1,1), [y]-[1])
		-(xy \bullet σ'(1,1), [xy]-[1])\\
		&=
		(x \bullet σ'(1,1), [x]-[1])
		+ (xy \bullet σ'(1,1) + \sigma'(x,y) -\sigma'(x,1), [xy]-[x])
		- (xy \bullet σ'(1,1), [xy]-[1])\\
		&=
		(x \bullet \sigma'(1,1) + \sigma'(x,y) -\sigma'(x,1) , 0).
	\end{align*}
	It remains to prove that $\sigma'(x,1) = x \bullet \sigma'(1,1)$.
	This follows from the $2$-cocycle relation \ref{def:2-cocycle relation}	in the case $y=z=1$.
\end{proof}





\section{The Reciprocity Isomorphism}

\begin{definition} \label{def:fundamental class}
	In this section $G$ is a finite group; $M$ is a representation of $G$ over a commutative ring $R$.
	We shall call $M$ a \emph{finite class formation} if:
	\begin{itemize}
		\item
		The ring $R$ has no additive torsion. This implies
		\[
			H^2(G,\aug(R,G)) \cong H^1(G,R) \cong \Hom(G,R) = 0.
		\]
	\end{itemize}
	Assume also that the representation $M$ satisfies the following conditions for all
 	subgroups $S$ of $G$:
	\begin{itemize}
		\item
		For all subgroups $S \le G$ we have $H^1(S,M) \cong 0$.
		\item
		For all subgroups $S \le G$, $H^2(S,M)$ is isomorphic as an $R$-module to $R / |S| \cdot R$.
	\end{itemize}
	If $M$ is a finite class formation then a generator $\sigma$ for $H^2(G,M)$ is called
	a \emph{fundamental class}.
\end{definition}

In this section we'll show that if $M$ is a finite class formation over the ring $\Z$
then there is an isomorphism (called the \emph{reciprocity isomorphism})
\[
	G^{\ab} \cong H^0_{\Tate}(G,M).
\]
The reciprocity isomorphism depends on the choice of a fundamental class.

\begin{example}
	If $G$ is a finite cyclic group then the trivial representation $\Z$
	is a finite class formation.
	This follows from \ref{lem:H2 cyclic Z}.
	The cocycle $\sigma_1$ defined in \ref{lem:H2 cyclic Z} is a fundamental class.
\end{example}

\begin{lemma} \label{lem:linear injective of surjective}
	Let $I$ be an ideal of a commutative ring $R$ and let $f:R/I \to R/I$
	be a surjective $R$-linear map.
	Then $f$ is injective.
\end{lemma}

\begin{proof}
	Without loss of generality $I=0$, since such a map is also $R/I$-linear.
	Let $c\in R$ be a preimage of $1$ and let $d = f(1)$.
	We have $cd = cf(1) = f(c) = 1$.
	The map $f$ is given by $f(x) = dx$ and the map $x \mapsto cx$ is an inverse.
\end{proof}

\begin{lemma} \label{lem:restriction fundamental class generates}
	\uses{def:fundamental class}
	Let $\sigma \in H^2(G,M)$ be a fundamental class.
	Then the restriction of $\sigma$ to any subgroup $S$ of $G$
	is a generator for $H^2(S,M)$.
\end{lemma}

\begin{proof}
	The restriction and corestriction maps are $R$-linear maps
	\[
		H^2(G,M) \stackrel{\rest}\to H^2(S,M) \stackrel{\cor}\to H^2(G,M).
	\]
	We need to prove that the restriction map is surjective.
	By the conditions on $M$, we can think of these maps as
	\[
		R / |G| \to R / |S| \to R / |G|.
	\]
	Since $R$ has no additive torsion, the image of $R/|S|$ in $R/|G|$
	is contained in the $S$-torsion, which is $[G:S] R / |G|$.
	Furthermore, since the composition is $[G:S]$,
	it follows that the image of $\cor$ is contains $[G:S] R / |G|$.
	Therefore the image of $\cor$ is precisely $[G:S] R / |G|$, which
	is isomorphic to $R/|S|$. Hence $\cor$ may be regarded as a surjective linear map
	$R/|S| \to R/|S|$.
	By \ref{lem:linear injective of surjective}, $\cor$ is injective with image
	$[G:S] H^2(G,M)$.

	Now let $b \in H^2(S,M)$. We have $\cor(b) = [G:S]c$ for some $c \in H^2(G,M)$.
	This implies $\cor(b) = \cor (\rest( c))$, and since $\cor$ is injective we have
	$b = \rest(c)$.
\end{proof}

\begin{theorem} \label{thm:splitting module trivial}
	\uses{lem:restriction fundamental class generates,
		lem:splits in splitting module}
	Let $\sigma \in H^2(G,M)$ be a fundamental class.
	Then $\Split(\sigma)$ has trivial cohomology.
\end{theorem}

\begin{proof}
	By \ref{thm:triviality criterion}, it's enough to prove for every subgroup $S$ of $G$ that
	$H^1(S,\Split(\sigma)) \cong 0$ and $H^2(H,\Split(\sigma)) \cong 0$.
	We have a long exact sequence with the following terms:
	\[
		0 \to H^1(S,\Split(\sigma)) \to H^1(S,\aug(R,G)) \to H^2(S,M) \to H^2(S,\Split(\sigma))
		\to 0.
	\]
	By \ref{lem:restriction fundamental class generates} and \ref{lem:splits in splitting module},
	the map $H^2(S,M) \to H^2(S,\Split(\sigma))$ is zero.
	In particular $H^2(S,\Split(\sigma)) \cong 0$.
	The $R$-modules $H^1(S,\aug(R,G))$ and $H^2(S,M)$ are both isomorphic to $R / |S|R$,
	and the map from one to the other is surjective.
	By \ref{lem:linear injective of surjective}, the map
	from $H^1(S,\aug(R,G))$ to $H^2(S,M)$ is also injective.
	Therefore $H^1(S,\Split(\sigma))=0$.
\end{proof}

\begin{definition} \label{def:reciprocity iso}
	\uses{thm:splitting module trivial}
	The theorem implies that we have isomorphisms for all $n\in \Z$ (which depend of $\sigma$):
	\[
		H^{n}_{\Tate}(G,\aug(R,G)) \cong H^{n+1}_{\Tate}(G,M) .
	\]
	In particular in the case $n = -1$, $R = \Z$ we have the reciprocity isomorphism
	\[
		\begin{matrix}
			G^{\ab} & \cong & H^{-1}_{\Tate}(G,\aug(\Z,G)) &\cong&  H^0_{\Tate}(G,M), \\
			g & \mapsto & [g] - [1] & \mapsto & \delta ([g] - [1])
		\end{matrix}.
	\]
	Here $\delta$ is the connecting map for the short exact sequence \ref{eq:split ses}.
\end{definition}

We shall finish off this chapter by giving a formula for the reciprocity isomorphism in terms of
a cocycle $\sigma'$ representing the fundamental class $\sigma$.

\begin{lemma} \label{lem:reciprocity formula}
	The reciprocity isomorphism for a fundamental class $\sigma \in H^2(G,M)$ is given by
	\[
		\reciprocity(g) \equiv  \sum_{x \in G} \sigma'(g,g) \bmod N_G M.
	\]
	This depends only on the cohomology class $\sigma$ rather than the cocycle $\sigma'$.
\end{lemma}

\begin{proof}
	We have a diagram with exact rows.
	Note that $C^0(G,M)$ and $C^{-1}(G,M)$ are both $M$ and the vertical maps are Tate coboundary maps,
	which are $N_G$.
	\[
		\begin{matrix}
			0 \to & C^{-1}(G,M) & \to & C^{-1}(G,\Split(\sigma)) & \to & C^{-1}(G,\aug(R,G)) & \to 0 \\
			&\downarrow &&\downarrow &&\downarrow \\
			0 \to & C^{0}(G,M) & \to & C^{0}(G,\Split(\sigma)) & \to & C^{0}(G,\aug(R,G)) & \to 0
		\end{matrix}
	\]
	Choose an element $g \in G$. Recall that this element corresponds to the element
	$[g]-[1] \in C^{-1}(G,\aug(\Z,G))$.
	An obvious pre-image off this element in $C^{-1}(G,\Split(\sigma))$ is
	the element $(0,[g]-[1])$.
	The image of $(0,[g]-[1])$ in $C^{0}(G,\Split(\sigma))$ is
	\[
		N_G(0,[g]-[1])
		=
		\left(\sum_{x \in G} (\sigma'(x,g) - \sigma'(x,1)), 0\right).
	\]
	By the cocycle relation we have $\sigma'(x,1) = \sigma'(1,1)$ for all $x\in G$.
	Hence the reciprocity map takes $g \in G$ to the element
	\[
		\sum_{x \in G} \sigma'(x,g) - |G| \sigma'(1,1)
		\in M^G / N_G M.
	\]
	Since every element of $H^\bullet_{\Tate} (G,-)$ is killed by $|G|$, this formula simplifies to
	\[
		\reciprocity (g) = \sum_{x \in G} \sigma'(x,g).
	\]
	If we modify $\sigma'$ by a coboundary $d\tau$:
	\[
		\sigma''(x,y) = \sigma'(x,y) + x \tau(y) - \tau(xy) + \tau(x),
	\]
	then we will add the folowing term to $\reciprocity(g)$:
	\[
		\sum_{x \in G} (x \tau(g) - \tau(xg) + \tau(x)).
	\]
	This sum simplifies to $N_G(\tau(g))$, which is zero in $H^0_{\Tate}(G,M)$.
\end{proof}


% \begin{example}
% 	The simplest example of a class formation and a fundamental class is in the case
% 	that $G$ is a cyclic group of order $n$ and $M$ is the trivial representation $\Z$.
% 	It follows immediately that the element $\sigma_1 \in H^2(G,\Z)$ defined in
% 	\ref{lem:H2 cyclic Z} is a fundamental class.
% 	In this case the reciprocity isomorphism takes the form
% 	\[
% 		G^{\ab} \cong H^0_{\Tate} (G,\Z) \cong \Z/n\Z.
% 	\]
% 	(The isomorphism depends on $\sigma_1$, which depends on a choice of generator $g \in G$).
% \end{example}
