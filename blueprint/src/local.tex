\chapter{Local Class Field Theory}

Let $G$ be a finite group and $M$ a representation of $G$.
An element $\sigma \in H^2(G,M)$ is called a fundamental class if for every $H \le G$,
\begin{itemize}
	\item
	$H^1(H,M) = 0$,
	\item
	$H^2(H,M)$ is cyclic of order $n$, and is generated by the restrictio of $\sigma$.
\end{itemize}

In this section we let $l/k$ be a finite Galois extension of local fields.
The group $G$ is taken to be the Galois group $Gal(l/k)$ and the representation $M$ is
taken to be $l^\times$.
In this chapter we will describe the construction of the fundamental classes
$\sigma \in H^2(l/k,l^\times)$. Here we are using the notation $H^\bullet(l/k,-)$ as an abbreviation
for $H^\bullet(Gal(l/k),-)$.

The following result (called Hilbert's theorem 90) is already in Mathlib.

\begin{theorem}\label{thm:hilbert 90}
	\mathlibok
	Let $l/k$ be a finite Galois extension of fields.
	Then $H^1(l/k, l^\times) \cong 0$.
\end{theorem}


\begin{theorem}\label{thm:additive field trivial}
	Let $l/k$ be a finite Galois extension of fields.
	Then there is an isomorphism of $Gal(l/k)$-representations:
	\[
		l \cong \ind_1(k).
	\]
	In particular $l$ has trivial cohomology.
\end{theorem}

\begin{proof}
	Recall from Galois theory that there is a normal basis for $l$ over $k$, i.e. a basis of the
	form
	\[
		\{\sigma \bullet x_0 : \sigma \in Gal(l/k)\}.
	\]
	Define a map $\ind_1(k) \cong l$ by
	\[
		\Phi (f : G \to k) = \sum_{\sigma \in Gal(l/k)} f(\sigma) \cdot \sigma x_0.
	\]
	This is clearly a linear bijection; we check that it commutes with the Galois action:
	\[
		\Phi(g\bullet f)
		= \sum_\sigma f(g^{-1}\sigma) \cdot \sigma x_0
		= \sum_\sigma f(\sigma) \cdot (g\sigma) \bullet x_0
		= g \bullet \Phi(f).
	\]
\end{proof}



\section{The Herbrand quotient of $l^\times$}

\begin{lemma}
	\label{lem:exists additive trivial}
	Let $U$ be any neighbourhood of $0$ in $l$.
	There is a Galois-invariant compact open subgroup $L \subseteq U$
	which has trivial cohomology.
\end{lemma}

\begin{proof}
	Let $P$ be the maximal ideal of $\cO_l$.
	Choose $n$ such that $P^n \subseteq U$.
	Choose a normal basis for $l$ over $k$ contained in $P^n$
	and let $L$ be the span of that basis over $\cO_k$.
	We therefore have an isomorphism of Galois modules $L \cong \coind_1(\cO_l)$, and coinduced
	representations have trivial cohomology.
\end{proof}

\begin{lemma} \label{lem:herbrand compact open additive}
	Suppose $l/k$ is a cyclic extension.
	Let $M \subset l$ be a compact open subrepresentation.
	Then $h(l/k,M)=1$.
\end{lemma}

\begin{proof}
	Choose $L \subseteq M$ as in lemma \ref{lem:exists additive trivial}.
	Since $L$ has finite index in $M$ we have $h(M) = h(L) = 1$.
\end{proof}


\begin{lemma}\label{lem:local isomorphism}
	There is a non-zero ideal $P^n \subset \cO_l$ such that the
	exponential and logarithm maps give inverse isomorphisms
	\[
		(1 + P^n, \times) \cong (P^n,+).
	\]
	This isomorphism commutes with the action of the Galois group.
\end{lemma}

\begin{proof}
	Choose $n$ large enough so that for all $r > 0$,
	\[
		rn - v_l(r!) \ge n, \qquad
		rn - v_l(r!) \stackrel{r \to \infty}\to \infty.
	\]
	Then $\exp(x)$ converges for all $x \in P^n$ to an element of $1 + P^n$ and
	$\log(1+x)$ converges to an element of $P^n$.
	Hence both $\exp(\log(1+x))$ and $\log(exp(x))$ converge.
	The identities $\exp(\log(1+x))=1+x$ etc. follow by observing that they are true as
	an equations of power series
\end{proof}


\begin{lemma}\label{lem:herbrand local units}
	If $l/k$ is a cyclic extension, then $h(l/k, \cO_l^\times) = 1$.
\end{lemma}

\begin{proof}
	Choose a subgroup $1+P^n$ as in the provious lemma.
	Since $\cO_l^\times / (1+P^n)$ is finite we have
	\[
		h(\cO_l^\times) = h(1+P^n) = h(P^n).
	\]
	The right hand side is $1$ by \ref{lem:herbrand compact open additive}.
\end{proof}

\begin{lemma} \label{lem:herbrand Z}
	If $G$ is a cyclic group and $\Z$ has the trivial action of $G$ then $h(G,\Z) = |G|$.
\end{lemma}

\begin{proof}
	The map	$N_G : \Z \to \Z$ is multiplication by $G$.
	Therefore
	\[
		Z^0_{Tate} = \Z^G = \Z, \qquad
		B^0_Tate = \image(N_G : \Z \to \Z) = n\Z.
	\]
	This shows that $H^0_{Tate}(G,\Z)\cong \Z / n\Z$.
	Also,	$H^1_{Tate}(G,\Z) \cong Hom(G,\Z) \cong 0$.
\end{proof}

\begin{lemma} \label{lem:herbrand local l*}
	If $l/k$ is a cyclic extension then $h(l/k, l^\times)= [l:k]$.
\end{lemma}

\begin{proof}
	We have a short exact sequence of representations
	\[
		0 \to \cO_l^\times \to l^\times \to \Z \to 0,
 	\]
	where the second map is the valuation.
	We've shown in \ref{lem:herbrand local units}, \ref{lem:herbrand Z}
	that $h(l/k,\cO^\times)=1$ and $h(l/k,\Z) = [l:k]$.
	Therefore $h(l/k,l^\times) = [l:k]$.
\end{proof}


\begin{lemma} \label{lem:local H2 l*}
	If $l/k$ is a cyclic extension of local fields then $|H^2(l/k,l^\times)| = [l:k]$.
\end{lemma}







\section{Fundamental classes in unramified extensions}

In this section we assume that $l/k$ is unramified.
In this case $Gal(l/k)$ is cyclic and may be identified with $Gal(\F_l / \F_k)$ where
$\F_l$ and $\F_k$ are the residue class fields of $l$ and $k$ respectively.
Also if we choose a uniformizer $\pi_k$ in $k$ (i.e. a generator for the maximal ideal in $\cO_k$)
then $\pi_k$ is also a uniformizer in $l$, so we may identify $\F_l$ with $\cO_l / \pi_k \cO_l$.

\begin{lemma} \label{lem:finite field trivial}
	The Galois modules $\F_l$ and $\F_l^\times$ have trivial cohomology.
\end{lemma}

\begin{proof}
	By periodicity, it's suffient to prove that $H^1$ and $H^2$ are trivial.
	Also, since $\F_l$ and $\F_l^\times$ are finite, they both have Herbrand quotient $1$,
	so it's enough to prove that $H^1$ is trivial.
	This follows from \ref{thm:hilbert 90} and \ref{thm:additive field trivial}.
\end{proof}


\begin{lemma} \label{lem:unramified additive trivial}
	If $l/k$ is unramified then there is a normal basis for $\cO_l$ over $\cO_k$.
	Hence there is an isomorphism of Galois representations $\cO_l \cong \ind_1 \cO_k$.
	In particular $\cO_l$ has trivial cohomology.
\end{lemma}

\begin{proof}
	By \ref{thm:additive field trivial}
	we may choose $x_0 \in \F_l$
	such that $\{\sigma \bullet x_0 :\sigma \in Gal(l/k)\}$ is a normal basis.
	Let $y \in \cO_l$ be a lift of $x_0$.
	We claim that $\{\sigma \bullet y\}$ is a normal basis
	in $\cO_l$. It's sufficient to show that these vectors span $\cO_l$ over $\cO_k$.
	Choose any $z \in \cO_l$. By assumption we may solve the congruence
	\[
		z \equiv \sum \lambda_{\sigma,0} \sigma y \mod \pi_k.
		\qquad
		(\lambda_{\sigma,0} \in \cO_k).
	\]
	Similarly we may solve the congruence
	\[
		(z - \sum \lambda_{\sigma,0} \sigma y) / \pi_k \equiv \sum \lambda_{\sigma,1} \sigma y \mod \pi_k.
		\qquad
		(\lambda_{\sigma,1} \in \cO_k).
	\]
	This implies
	\[
		z \equiv \sum (\lambda_{\sigma,0} + \lambda_{\sigma_1} \pi_k) \sigma y \mod \pi_k^2.
	\]
	etc.
	Proceeding in this way, we construct convergent series
	$\lambda_{\sigma} = \sum \lambda_{\sigma,r}\pi^r \in \cO_k$,
	such that $z = \sum_\sigma \lambda_\sigma y$.
\end{proof}




\begin{lemma}	\label{lem:unramified units trivial}
	If $l/k$ is unramified then $\cO_l^\times$ has trivial cohomology.
\end{lemma}

\begin{proof}
	Recall (\ref{lem:local isomorphism}) that for $n$ sufficiently large we have isomorphisms of
	Galois modules:
	\[
		1 + P^n \cong P^n \cong \cO_l,
	\]
	where the first map is the logarithm and the second map is multiplication by $\pi_k^{-n}$.
	Hence by \ref{lem:unramified additive trivial}, the multiplictive subgroup $1+P^n$ has trivial
	cohomology.
	The long exact sequence now gives isomorphisms
	\[
		H^r(l/k,\cO_l^\times) \cong H^r(l/k,\cO_l^\times / (1+P^n)).
	\]
	We'll prove by induction on $n$ that $\cO_l^\times / (1+P^n)$ has trivial cohomology.
	In the case $n = 1$ we have
	\[
		\cO_l^\times / (1+P) \cong \F_l^\times.
	\]
	In this case the result follows from \ref{thm:finite field trivial}.

	For the inductive step we note that there is a short exact sequence of Galois modules
	\[
		0 \to \F_l \to  \cO_l^\times / (1+P^{n+1})  \to\cO_l^\times / (1+P^n)  \to  0,
	\]
	where we have identified $P^n / P^{n+1}$ with $\F_l$.
	By the inductive hypothesis, we assume that $\cO_l^\times / (1+P^n)$ has tivial cohomology.
	By \ref{lem:Finite field trivial} $\F_l$ has trivial cohomology.
	Hence by the long exact seqeunce, $\cO_l^\times / (1+P^{n+1})$ has trivial cohomology.
\end{proof}


\begin{corollary}
	Let $l/k$ be an unramified extension of local fields.
	Then there are isomorphisms
	\[
		H^\bullet_{Tate}(l/k,l^\times) \cong H^\bullet (l/k,\Z)
	\]
	defined by the valuation map $v : l^\times \to \Z$.
	The inverse map is defined by $n \mapsto \pi_k^n$, and does not depend on the choice of $\pi_k$.
\end{corollary}

\begin{proof}
	This follows from the long exact sequence using \ref{lem:unramified units trivial}.
\end{proof}


\begin{lemma} \label{lem:unrammified fundamental class}
	Let $l/k$ be an unramified cyclic extension of local fields.
	Then $H^2(l/k,l^\times)$ is cyclic of order $[l:k]$.
	It is generated by the cohomology class of the following cocycle
	\[
		\sigma_{l/k} (F_k^r, F_k^s) =
		\begin{cases}
			1 & r + s < [l:k], \\
			\pi_k & r + s \ge [l:k].
		\end{cases}
	\]
	Here $F_k$ is the Frobenius element generating $Gal(l/k)$ and $r$ and $s$
	are chose to be integers in the range $0 \le r,s <[l:k]$.
\end{lemma}

\begin{proof}
	This follows from the previous result together with
	the description of $H^2(l/k,\Z)$.
\end{proof}


\begin{lemma}
	Let $m / l / k$ be an unramified tower of extensions of local fields
	Then the restriction to $m/l$ of $\sigma_{m/k}$ is $\sigma_{m/l}$.
	I.e. $\sigma$ is a fundamental class.
\end{lemma}

\begin{proof}
	Up to cohomology, $\sigma_{l/k}$ does nor depent on the choice of
	uniformizer, so we may assume $\pi_k=\pi_l$.
	We have $F_l = F_k^f$ where $f = [l:k]$.
	Hence
	\begin{align*}
		\sigma_{m/k}(F_l^r, F_l^s)
		&=
		\sigma_{m/k}(F_k^{fr}, F_k^{fs})\\
		&=
		\begin{cases}
			1 & fr + rs < [m:k] \\
			\pi_k & fr + fs \ge [m:k]
		\end{cases}\\
		&=
		\begin{cases}
			1 & r + s < [m:l] \\
			\pi_k & r + s \ge [m:l]
		\end{cases}\\
		&=\sigma_{m/l}(F_l^r,F_l^s).
	\end{align*}
\end{proof}
